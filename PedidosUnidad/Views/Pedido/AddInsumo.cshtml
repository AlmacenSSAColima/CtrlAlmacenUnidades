@model PedidosUnidad.Models.AddInsumoForm
@{
    Layout = null;
}

<!DOCTYPE html>

<style>
    .linsumo {
        cursor: pointer;
    }

        .linsumo:hover {
            background: #eee;
        }

    .prw_insumo {
        float: left;
        cursor: pointer;
    }

        .prw_insumo:hover {
            color: #3F51B5;
            font-weight: 600;
        }
</style>

<div id="ModalInsumo" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-md">
        <div class="modal-content" id="DatosInsumo">
            <div class="modal-header">
                <div class="btn-clsin">Agregar nuevo articulo (@Model.cantidad_claves Claves de @Model.tipo_insumo)</div>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">
                        <i class="fa fa-circle b-cv"></i>
                        <i class="fa fa-circle b-ca"></i>
                        <i class="fa fa-circle b-cr"></i>
                    </span>
                </button>
            </div>
            <div class="modal-body" style="min-height:200px;" id="mdl_body">
                <div class="row">
                    <!--LISTADO Y SELECCION DE ARTICULO-->
                    <div class="col-sm-12 col-md-12 col-lg-12">
                        <div class="input-group" style="margin-bottom:5px;">
                            <input id="filtrar_insumo" type="text" class="form-control filteres" placeholder="Buscar...">
                            <span class="input-group-btn">
                                <button style="z-index:2; height:26px;" class="btn btn-primary md-search-white" type="button">&nbsp;&nbsp;&nbsp;&nbsp;</button>
                            </span>
                        </div>
                        <div id="dvd_claves_select" style="width:100%; height:345px; background:#F5F5F5; border-radius: 5px; border-bottom:1px solid #ccc;">
                            <nav class="archive-links">
                                <ol id="lista_insumos_">
                                    @{int i = 1; }
                                    @foreach (var item in Model.clavesCat)
                                    {
                                        <li onclick="addInsumo('@item.pk');" class="linsumo">
                                            <div style="float:left; width:90%;">
                                                <div style="width:100%; height:20px;">
                                                    <span id="cveS_@item.pk" style="font-size:12px; float:left; margin-right:2px;">@*@i.ToString().-*@ @item.clave_txt</span>
                                                    <span id="presS_@item.pk" style="font-size:11px; float:left;">(@item.presentacion_txt) @item.categoria</span>
                                                </div>
                                                <div style="width:100%; height:15px; font-size: 12px; line-height: 11px; color:#818181; margin-top:-2px;">
                                                    @{ string insumo;
                                                        if (item.descripcion.Length > 70)
                                                        {
                                                            insumo = item.descripcion.Substring(0, 69) + "...";
                                                        }
                                                        else
                                                        {
                                                            insumo = item.descripcion;
                                                        }
                                                    }
                                                    @insumo
                                                    @{ i++;}
                                                </div>
                                                <div id="descLaS_@item.pk" style="display:none;">@item.descLarga</div>
                                                <input type="hidden" name="item_des_@item.pk" id="item_des_@item.pk" value="@item.descripcion" />
                                                <input type="hidden" name="item_ins_pk_@item.pk" id="item_ins_pk_@item.pk" value="@item.pk" />
                                                <input type="hidden" name="item_ins_tipo_@item.pk" id="item_ins_tipo_@item.pk" value="@item.tipo" />
                                                <input type="hidden" name="item_ins_grupo_@item.pk" id="item_ins_grupo_@item.pk" value="@item.grupo" />
                                                <input type="hidden" name="item_ins_clave_@item.pk" id="item_ins_clave_@item.pk" value="@item.clave" />
                                                <input type="hidden" name="item_ins_presentacion_@item.pk" id="item_ins_presentacion_@item.pk" value="@item.presentacion" />

                                            </div>
                                            <div id="s_@item.pk" class="seleccionate" style="float:right; width:25px; text-align:center; padding-top:9px; display:none;">
                                                <i class="fa fa-check" style="font-size:18px; color:#4CAF50;"></i>
                                            </div>
                                        </li>
                                    }
                                </ol>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
            <br />
            <div class="modal-footer">
                <div class="btn-group" role="group">
                    <button type="button" class="btn btn-default b-cr tooltip-test" data-toggle="tooltip" data-placement="top" title="" data-original-title="Salir" data-dismiss="modal" style="margin-right:3px;"><i class="fa fa-fw fa-close"></i> SALIR</button>
                    @*<button onclick="addInsumo_();" type="button" class="btn btn-default b-cv tooltip-test" data-toggle="tooltip" data-placement="top" title="" data-original-title="Guardar"><i class="fa fa-fw fa-check"></i> GUARDAR INSUMO</button>*@
                </div>
            </div>
        </div>
        <!-- /.modal-content -->



        <div id="open-modal" class="modal-window">
            <div>
                <a href="javascript:closeModalCantidad();" title="Close" class="modal-close">Cerrar</a>
                <h1 id="cve_insumo_confirm">010-000-0106-00</h1>
                <input id="pk_insumo_confirm" type="text" hidden />
                <div style="width:100%; height:25px; padding:1px; margin-bottom:5px;">
                    <div style="width:48%; height:25px; float:left; background: #eee; margin-right: 12px;  margin-bottom:1px;">
                        <div id="presentacion_insumo_confirm" style="width:100%; height:25px;  margin-bottom: 1px; color: #4a4a4a; text-align: center; padding-top: 4px; font-size: 12px;">
                            0000
                        </div>
                    </div>
                    <div style="width:48%; height:25px; float:left; background: #eee; margin-bottom:1px;">
                        <div id="subtipo_insumo_confirm" style="width:100%; height: 25px; margin-bottom: 1px; color: #4a4a4a; text-align: center; padding-top: 4px; font-size: 12px;">
                            Medicamento
                        </div>
                    </div>
                </div>
                <div id="descripcion_insumo_confirm" style="line-height: 16px; background: #eee; padding: 2px; border-radius: 3px; min-height: 75px; font-size:12px; color: #4a4a4a;">
                    A CSS-only modal based on the :target pseudo-class. Hope you find it helpful.
                </div>
                <div style="width:100%; height:75px; padding:1px;">
                    <div style="width:48%; height:70px; float:left; background: #eee; margin-right: 12px;">
                        <div id="existencia_insumo_confirm" style="width:100%; height:47px;  margin-bottom: 1px; color: #4a4a4a; font-weight: bold; text-align: center; padding-top: 10px; font-size: 26px;">
                            0000
                        </div>
                        <div style="width:100%; height:20px; text-align: center;  margin-bottom: 1px; color:#4a4a4a; ">
                            Existencia Almacén
                        </div>
                    </div>
                    <div style="width:48%; height:70px; float:left; background: #eee;">
                        <div style="width:100%; height: 47px; margin-bottom: 1px; color: #4a4a4a; font-weight: bold; text-align: center; padding-top: 10px; font-size: 26px;">
                            <input class="inputSolicita" type="text" id="cantidad_solicitar" name="cantidad_solicitar" style="background: #eee; border: none; width: 100%; color: #4a4a4a; text-align:center;" />
                        </div>
                        <div style="width:100%; height:20px; text-align: center; margin-bottom: 1px; color:#4a4a4a;">
                            Cantidad Solicitar
                        </div>
                    </div>
                </div>
                <div style="width: 100%; margin-top: 16px; line-height: 12px; color:#4a4a4a;">
                    <small>*Las existencias en almacén son sujetas a cambios sin previo aviso por procesos internos de movimiento.</small>
                </div>
                <div style="text-align: center;">
                    <button onclick="closeModalCantidad();" type="button" class="btn btn-default b-cr tooltip-test" data-toggle="tooltip" data-placement="top" title="" data-original-title="Salir" style="margin-right:3px; width:102px;"><i class="fa fa-fw fa-close"></i> SALIR</button>
                    <button onclick="addConfirmInsumo();" type="button" class="btn btn-default b-cv tooltip-test" data-toggle="tooltip" data-placement="top" title="" data-original-title="Agregar" style="width:105px;"><i class="fa fa-fw fa-check"></i> AGREGAR</button>
                </div>

            </div>
        </div>


    </div>
    <!-- /.modal-dialog -->
</div>

<script type="text/javascript">
    //Lotes agregados
    var jsonLotes = [];

    $(document).ready(function () {

        //$("#caducidad_cap").datepicker();
        //Date picker

        //Escroll par div de claves a seleccionar
        $('#dvd_claves_select').slimscroll({
            height: '345px'
        });

        //Solo numero 
        justNumber("inputSolicita");

        //Filtro de consulta
        $("#filtrar_insumo").keyup(function (e) {
            _this = this;
            $("#lista_insumos_ li").each(function (i, e) {
                if ($(this).text().toLowerCase().indexOf(_this.value.toLowerCase()) === -1)
                    $(this).hide();
                else
                    $(this).show();
            });
        });



        //Listener Submit
        //$("#frm_datos_articulo").submit(function (event) {
        //    event.preventDefault();
        //});

        //Listener de Input cantidad. Solo poder escribir numero con punto decimal
        //justNumberDecimal('ins_cantidad_cap');
        //justNumberDecimal('ins_costo_cap');

    });

</script>